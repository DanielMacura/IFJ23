//LL(1) gramatika v yacc-like syntaxe
//
// https://cyberzhg.github.io/toolbox/cfg2ll pre pvorbu ll(k) gramatiky z cfg
// http://www.fit.vutbr.cz/~ikocman/llkptg/ pre tvorbu ll tabulky a overenia stupna gramatiky
//
//--------------------//

BODY : /*eps*/
| "func" func_id "(" PARAMETERS ")" "->" TYPE "{" NESTED_BODY "}" BODY
| "if" EXPRESSION "{" NESTED_BODY "}" "else" "{" NESTED_BODY "}" BODY
| "while" EXPRESSION "{" NESTED_BODY "}" BODY
| "return" RETURN END_OF_COMMAND BODY
| FUNCTION_CALL END_OF_COMMAND BODY
| DEFINITION END_OF_COMMAND BODY
| ASSIGNMENT END_OF_COMMAND BODY;

NESTED_BODY : /*eps*/                                                           // Avoids nested function definion 
| "if" EXPRESSION "{" NESTED_BODY "}" "else" "{" NESTED_BODY "}" NESTED_BODY
| "while" EXPRESSION "{" NESTED_BODY "}" NESTED_BODY
| "return" RETURN END_OF_COMMAND NESTED_BODY
| FUNCTION_CALL END_OF_COMMAND NESTED_BODY
| DEFINITION END_OF_COMMAND NESTED_BODY
| ASSIGNMENT END_OF_COMMAND NESTED_BODY;

DEFINITION : "var" var_id DEFINITION_PRIME
| "let" var_id DEFINITION_PRIME;

DEFINITION_PRIME : ":" TYPE DEFINITION_PRIME_PRIME
| "=" ASSIGNMENT_PRIME;

DEFINITION_PRIME_PRIME : /*eps*/
| "=" ASSIGNMENT_PRIME;

ASSIGNMENT : var_id "=" ASSIGNMENT_PRIME;

ASSIGNMENT_PRIME : EXPRESSION
| FUNCTION_CALL;

FUNCTION_CALL : func_id "(" PARAMETERS ")";

TYPE : C_TYPE POSTFIX;

POSTFIX : /*eps*/
| "?";

C_TYPE : "int"
| "double"
| "string"
| "void";

END_OF_COMMAND : "\n"
| ";" END_OF_COMMAND_PRIME;

END_OF_COMMAND_PRIME : /*eps*/
| "\n";

PARAMETERS : /*eps*/
| var_id var_id ":" TYPE PARAMETERS_PRIME;

PARAMETERS_PRIME : /*eps*/
| "," var_id var_id ":" TYPE PARAMETERS_PRIME;

ARGUMENTS : /*eps*/
| var_id ":" EXPRESSION ARGUMENTS_PRIME
| EXPRESSION ARGUMENTS_PRIME;

ARGUMENTS_PRIME : /*eps*/
| "," ARGUMENTS_PRIME_PRIME;

ARGUMENTS_PRIME_PRIME :
| var_id ":" EXPRESSION ARGUMENTS_PRIME
| EXPRESSION ARGUMENTS_PRIME;

RETURN : /*eps*/
| EXPRESSION
| FUNCTION_CALL;

EXPRESSION : /*eps*/;